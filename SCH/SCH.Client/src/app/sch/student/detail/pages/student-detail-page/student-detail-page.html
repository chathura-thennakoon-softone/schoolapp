<div class="container">
    @if (!studentId) {
    <h2>Add Student</h2>
    } @else {
    <h2>Edit Student</h2>
    }

    @if (!isStudentLoading) {
    <form
        [formGroup]="studentForm"
        (ngSubmit)="onSubmit()"
    >

        <div class="form-group">
            <label for="firstName">First Name</label>
            <input
                id="firstName"
                formControlName="firstName"
                class="form-control"
            />
            @if (formControls['firstName'].touched && formControls['firstName'].invalid) {
            <div class="text-danger">
                @if (formControls['firstName'].errors?.['required']) {
                <small>First Name is required.</small>
                }
                @if (formControls['firstName'].errors?.['minlength']) {
                <small>First Name should be at least 2 characters.</small>
                }
            </div>
            }
        </div>

        <div class="form-group">
            <label for="lastName">Last Name</label>
            <input
                id="lastName"
                formControlName="lastName"
                class="form-control"
            />
            @if (formControls['lastName'].touched && formControls['lastName'].invalid) {
            <div class="text-danger">
                @if (formControls['lastName'].errors?.['minlength']) {
                <small>Last Name should be at least 2 characters.</small>
                }
            </div>
            }
        </div>

        <div class="form-group">
            <label for="email">Email</label>
            <input
                id="email"
                formControlName="email"
                class="form-control"
            />
            @if (formControls['email'].touched && formControls['email'].invalid) {
            <div class="text-danger">
                @if (formControls['email'].errors?.['email']) {
                <small>Please enter a valid email address.</small>
                }
            </div>
            }
        </div>

        <div class="form-group">
            <label for="ssn">SSN</label>
            <input
                id="ssn"
                formControlName="ssn"
                class="form-control"
            />
            @if (formControls['ssn'].touched && formControls['ssn'].invalid) {
            <div class="text-danger">
                @if (formControls['ssn'].errors?.['required']) {
                <small>SSN is required.</small>
                }
                @if (formControls['ssn'].errors?.['minlength']) {
                <small>SSN should be at least 2 characters.</small>
                }
            </div>
            }
        </div>


        <div class="form-group">
            <label for="phone">Phone Number</label>
            <input
                id="phone"
                formControlName="phoneNumber"
                class="form-control"
            />
            @if (formControls['phoneNumber'].touched && formControls['phoneNumber'].invalid) {
            <div class="text-danger">
                @if (formControls['phoneNumber'].errors?.['pattern']) {
                <small>Phone number must be 10 digits.</small>
                }
            </div>
            }
        </div>

        <div class="form-group">
            <label for="startdate">Start Date</label>
            <input
                id="startdate"
                type="date"
                formControlName="startDate"
                class="form-control"
            />
        </div>

        <div class="form-group row">
            <label
                class=" control-label col-md-3"
                id="lbl_create_image"
                for="selectedImage"
            >
                Profile Image
                <span class="text-danger">*</span>
            </label>
            <div class="col-md-9 row">
                <div class="mb-3">
                    <input
                        type="file"
                        (change)="onFileChange($event)"
                        accept='.jpg, .JPG, .jpeg, .JPEG, .png, .PNG, .jfif, .JFIF'
                        id="selectedImage"
                        [disabled]="isStudentSaving || isUploadingImage || isDeletingImage"
                    />
                </div>

                <figure class="figure">
                    @if (profileImage && isImageChanged) {
                    <img
                        src="{{ profileImage }}"
                        [width]="100"
                        [height]="100"
                        class="img-fluid ml-3 thumbnail-img"
                        id="img_create_image"
                        alt=""
                        role="presentation"
                    >
                    }

                    @if (student?.imageUrl && !isImageChanged) {
                    <img
                        [src]="student!.imageUrl"
                        [width]="100"
                        [height]="100"
                        class="img-fluid ml-3 thumbnail-img"
                        id="img_create_image"
                        alt=""
                        role="presentation"
                    >
                    }


                </figure>
            </div>
        </div>

        <button
            type="submit"
            class="btn btn-primary"
            [disabled]="isStudentSaving || isUploadingImage || isDeletingImage"
        >Save</button>
        <button
            (click)="onBack()"
            [disabled]="isStudentSaving || isUploadingImage || isDeletingImage"
        >Back</button>
    </form>
    }
</div>
























<router-outlet></router-outlet>